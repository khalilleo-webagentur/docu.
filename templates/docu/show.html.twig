{% extends 'layout/base.html.twig' %}

{% block title %} {{appName()}} :: {{catigory.name}} {% endblock %}

{% block body %}

{% include 'layout/navbar.html.twig' %}

{% include 'component/custom_type_message_top_fixed.html.twig' %}

{% set _uri = app.request.uri %}

{% set _itemDefined = item is defined and item %}

<div class="container-fluid bg-warning">
    <div class="container pt-3">
        <div class="row py-2 justify-content-center text-center">
            <div class="col-lg-6">
                <div class="d-block mx-auto">
                   {% include 'docu/partial/search_form.html.twig' %}
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container my-5">
    <div class="row pb-5">
        <div class="col-lg-3 mb-3">

            <div class="bg-white p-2 overflow-auto px-3" style="height: 71vh;">
                {% if count(catigories) > 0 %}
                {% for row in catigories %}

                <br><b class="{{row.name == catigory.name ? 'text-danger' : ''}}">{{row.name}}</b><br>

                {% for item in row.items %}
                {% set _currentTab = app.request.getSchemeAndHttpHost() ~ path('app_docu_item_name', {slug:slug(item.slug)}) %}
                
                <a href="{{path('app_docu_item_name', {slug:slug(item.slug)})}}"
                    class="text-decoration-none {{_uri == _currentTab or item.slug == slug ? 'text-danger' : 'text-primary'}} fs-14">
                    <span class="bi bi-dash-lg pe-1 ps-2"></span> {{item.slug}}
                </a><br>
                {% endfor %}

                {% endfor %}
                {% endif %}
            </div>

        </div>
        <div class="col-lg-6 mb-3">

            <h4>{{catigory.name}} <small class="bi bi-chevron-double-right text-secondary"></small> {{slug}}</h4>

            <p class="text-secondary">{{catigory.description}}</p>

            {% if item is defined and item %}
            <div class="p-2">
                {{item.content}}
            </div>
            {% endif %}

            <hr class="bg-light">

            <div class="row mb-3">
                <div class="col">
                    <a href="#" class="text-decoration-none text-secondary small">
                        <span class="bi bi-arrow-left-circle-fill pe-1"></span> Privious
                    </a>
                </div>
                <div class="col">
                    <div class="float-end">
                        <a href="#" class="text-decoration-none text-secondary small">
                            Next <span class="bi bi-arrow-right-circle-fill ps-1"></span>
                        </a>
                    </div>
                </div>
            </div>

            <div class="row text-center bg-white py-5">
                <div class="col">
                    <h5 class="mb-3">Was this article helpful?</h5>

                    <div class="row">
                        <div class="col-6 text-end">
                            <form action="{{path('app_docu_item_rate_store')}}" method="post">
                                <button class="btn btn-success w-50 btnLike" style="border-radius: 0;" type="submit"
                                    data-id="{{_itemDefined ? item.id : 0}}">
                                    <span class="bi bi-hand-thumbs-up"></span> <span class="ps-2">({{_itemDefined ?
                                        item.likes : 0}})</span>
                                </button>
                                <input type="hidden" name="id" value="{{_itemDefined ? item.id : 0}}">
                                <input type="hidden" name="like" value="on">
                                <input type="hidden" name="uri" value="{{_uri}}">
                            </form>
                        </div>
                        <div class="col-6 text-start">
                            <form action="{{path('app_docu_item_rate_store')}}" method="post">
                                <button class="btn btn-danger w-50 btnDisLike" style="border-radius: 0;" type="submit"
                                    data-id="{{_itemDefined ? item.id : 0}}">
                                    <span class="bi bi-hand-thumbs-down"></span> <span class="ps-2">({{_itemDefined ?
                                        item.disLikes : 0}})</span>
                                </button>
                                <input type="hidden" name="id" value="{{_itemDefined ? item.id : 0}}">
                                <input type="hidden" name="disLike" value="on">
                                <input type="hidden" name="uri" value="{{_uri}}">
                            </form>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="col-lg-3">
            <div class="md-d-none py-4 bg-white px-3">
                {% for item in catigory.items %}
                <div class="p-1">
                    <a href="{{path('app_docu_item_name', {slug:slug(item.slug)})}}" class="text-decoration-none fs-12">
                        {{item.slug}}
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

{% include 'layout/footer.html.twig' %}

{% endblock %}